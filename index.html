<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
    <title>Document</title>
</head>
<body>
    <div class="box">
        <div class="bar">
            <div class="info">
                <div class="side">
                    <span class="level">Level <span id="GRIST-LEVEL"></span></span>
                    <span class="xp"><span id="GRIST-XP"></span>/500</span>
                </div>
                <div class="side">
                    <span class="score"><span id="GRIST-SCORE"></span>$</span>
                </div>
            </div>
            <div class="progress-line">
                <span style="width:40%"></span>
            </div>
        </div>
    </div>
    <style>
        /* @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap'); */
    </style>
    <script>
      grist.ready({
        columns: ["XP","Level","Score"]
      });

      
      function singleColumn(record) {
        const columns = Object.keys(record || {}).filter(k => k !== 'id');
        return columns.length === 1 ? record[columns[0]] : undefined;
      }
      
      grist.onRecord(function(record) {
        const mapped = grist.mapColumnNames(record);
        // Get Columns Data //
        let Level = mapped ? mapped.Level : singleColumn(record);
        let XP = mapped ? mapped.XP  : singleColumn(record);;
        let Score = mapped ? mapped.Score  : singleColumn(record);;
            document.getElementById('GRIST-LEVEL').value = Level
            document.getElementById('GRIST-XP').value = XP 
            document.getElementById('GRIST-SCORE').value = Score
      });
    </script>
</body>
</html>
